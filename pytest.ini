[pytest]
minversion = 7.0

# Only collect from these roots (authoritative!)
testpaths =
    tests
    cross_component_tests

# Do NOT recurse into package-embedded tests or legacy dirs
norecursedirs =
    .venv
    build
    dist
    tpm_job_finder_poc/*

# Performance optimizations:
# - Parallel execution with optimal worker count
# - Disable coverage during development (enable with --cov when needed)
# - Cache test results for faster re-runs
# - Show only failures and errors for speed
# - Timeout individual tests to prevent hanging
# - Optimize test collection and import performance
addopts = 
    -n auto
    --tb=short
    --strict-markers
    --strict-config
    --cache-clear
    --timeout=60
    --disable-warnings
    --maxfail=5
    -ra

# Make package importable
pythonpath = .

# Asyncio support - pytest-asyncio required for asyncio_mode
# asyncio_mode = auto

# Enable test result caching for faster re-runs
cache_dir = .pytest_cache

# Optional but nice: declare markers to avoid warnings
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (moderate speed)
    e2e: End-to-end tests (slower)
    regression: Regression prevention tests
    slow: Slow tests that should be run separately
    asyncio: Asyncio-based tests
